characters = [{nome: 'Young Gojo', vida: 150, energiaA: -300, energiaAR:0, defesa: 30, ataque: 30,estilo:'humano', id:0},
              {nome: 'Young Gojo', vida: 200, energiaA: -250, energiaAR:0, defesa: 30, ataque: 30,estilo:'humano', id:1},
             {nome: 'Itadori', vida: 150, energiaA: -150, energiaAR:0, defesa: 15, ataque: 10, estilo:'humano', id:2},
             {nome: 'Megumi', vida: 150, energiaA: -160, energiaAR:0, defesa: 20, ataque: 8, estilo:'humano', id:3},
             {nome: 'Sukuna (5 f)', vida: 200, energiaA: -250, energiaAR:125, defesa: 25, ataque: 30, estilo:'humano', id:4},
             {nome: 'Nobara', vida: 140, energiaA: -125, energiaAR:0, defesa: 10, ataque: 6, estilo:'humano', id:5},
             {nome: 'Maki', vida: 150, energiaA: 000, energiaAR:000, defesa: 18, ataque: 25, estilo:'humano', id:6},
             {nome: 'Geto', vida: 170, energiaA: -200, energiaAR:0, defesa: 20, ataque: 26, estilo:'humano', id:7},
             {nome: 'Young Yuta', vida: 150, energiaA: -300, energiaAR:150, defesa: 25, ataque: 30, estilo:'humano', id:8},
             {nome: 'Miwa', vida: 135, energiaA: -100, energiaAR:0, defesa: 5, ataque: 6, estilo:'humano', id:9},
             {nome: 'Mai', vida: 140, energiaA: -50, energiaAR:0, defesa: 10, ataque: 8, estilo:'humano', id:10},
             {nome: 'Todo', vida: 170, energiaA: -150, energiaAR:0, defesa: 20, ataque: 18, estilo:'humano', id:11},
             {nome: 'Shoko', vida: 140, energiaA: -100, energiaAR:50, defesa: 5, ataque: 8, estilo:'humano', id:12},
             {nome: 'Mei Mei', vida: 150, energiaA: -150, energiaAR:0, defesa: 15, ataque: 18, estilo:'humano', id:13},
             {nome: 'Inumaki', vida: 130, energiaA: -120, energiaAR:0, defesa: 15, ataque: 20, estilo:'humano', id:14},
             {nome: 'Nanami', vida: 170, energiaA: -170, energiaAR:0, defesa: 18, ataque: 18, estilo:'humano', id:15},
             {nome: 'Yuki', vida: 170, energiaA: -220, energiaAR:110, defesa: 25, ataque: 28, estilo:'humano', id:16},
             {nome: 'Kashimo', vida: 200, energiaA: -300, energiaAR:0, defesa: 10, ataque: 28, estilo:'humano', id:17},
             {nome: 'Toji', vida: 150, energiaA: 000, energiaAR:000, defesa: 40, ataque: 30, estilo:'humano', id:18},
             {nome: 'Miguel', vida: 150, energiaA: -110, energiaAR:0, defesa: 10, ataque: 20, estilo:'humano', id:19},
             {nome: 'Choso', vida: 160, energiaA: -150, energiaAR:0, defesa: 15, ataque: 15, estilo:'humano', id:20},
             {nome: 'Panda', vida: 160, energiaA: -100, energiaAR:0, defesa: 20, ataque: 18, estilo:'humano', id:21},
             {nome: 'Mahito', vida: 170, energiaA: -250, energiaAR:0, defesa: 25, ataque: 25, estilo:'n_humano', id:22},
             {nome: 'Jogo', vida: 150, energiaA: -160, energiaAR:0, defesa: 20, ataque: 28, estilo:'n_humano', id:23},
             {nome: 'Hanami', vida: 170, energiaA: -140, energiaAR:0, defesa: 25, ataque: 15, estilo:'n_humano', id:24},
             {nome: 'Hakari', vida: 180, energiaA: -280, energiaAR:140, defesa: 25, ataque: 28, estilo:'humano', id:25},
             {nome: 'Gakuganji', vida: 120, energiaA: -200, energiaAR:0, defesa: 10, ataque: 30, estilo:'humano', id:26},
             {nome: 'Kamo', vida: 140, energiaA: -120, energiaAR:0, defesa: 15, ataque: 15, estilo:'humano', id:27},
	     {nome: 'Dagon', vida: 160, energiaA: -150, energiaAR:0, defesa: 25, ataque: 25, estilo:'n_humano', id:28},
	     {nome: 'Muta', vida: 60, energiaA: -600, energiaAR:0, defesa: 30, ataque: 20, estilo:'humano', id:29},
       {nome: 'Uraume', vida: 170, energiaA: -180, energiaAR:90, defesa: 20, ataque: 20, estilo:'humano', id:30},
	     	{nome: 'Haruta', vida: 400, energiaA: -50, energiaAR:0, defesa: 0, ataque: 5, estilo:'humano', id:31},
             {nome: 'Kenjaku', vida: 250, energiaA: -400, energiaAR:0, defesa: 30, ataque: 60, estilo:'n_humano', id:32},
             {nome: 'Gojo (Adult)', vida: 250, energiaA: -500, energiaAR:250, defesa: 45, ataque: 75, estilo:'humano', id:33},
             {nome: 'Sukuna (20 f)', vida: 250, energiaA: -450, energiaAR:225, defesa: 30, ataque: 80, estilo:'humano', id:34},
             {nome: 'Rika', vida: 250, energiaA: -350, energiaAR:0, defesa: 28, ataque: 65, estilo:'n_humano', id:35},
             {nome: 'Yuta', vida: 250, energiaA: -600, energiaAR:300, defesa: 30, ataque: 75, estilo:'humano', id:36},
	     {nome: 'Mahoraga', vida: 250, energiaA: -300, energiaAR:0, defesa: 0, ataque: 75, estilo:'n_humano', id:37},
	     {nome: 'Takaba', vida: 200, energiaA: -250, energiaAR:100, defesa: 30, ataque: 60, estilo:'humano', id:38},
       {nome: 'Higuruma', vida: 200, energiaA: -100, energiaAR:00, defesa: 30, ataque: 50, estilo:'humano', id:39}];

cursed_tools = [{energiaA: -40, ataque: 5, id:1,life:45}, {energiaA: -60, ataque: 10, id:2,life:70}, {energiaA: -60, ataque: 10, id:3,life:70},
               {energiaA: -100, ataque: 0, id:4,life:100}, {energiaA: -40, ataque: 15, id:5,life:55}, {energiaA: -30, ataque: 5, id:6,life:35},
               {energiaA: -50, ataque: 10, id:7,life:60}, {energiaA: -80, ataque: 0, id:8,life:80}, {energiaA: -80, ataque: 15, id:9,life:95}
               ,{energiaA: -100, ataque: 20, id:10,life:120},{energiaA: -80, ataque: 12, id:11,life:92},{energiaA: -20, ataque: 20, id:12,life:40}, 
		{energiaA: -60, ataque: 10, id:13,life:70},{energiaA: 0, ataque: 0, id:14,life:-1}];

backgroundImages = ['bkg1.png', 'bkg2.png','bkg3.jpg','bkg4.png','bkg5.png']
//defesa_mahoraga = 35 antes
//backgroundImages = ['https://i.redd.it/vr72t8onoaq81.png', 'https://preview.redd.it/i278jvdyli471.png?width=1080&crop=smart&auto=webp&s=818e2415a10376054a2ffa20efd14dac2d049649','https://i.pinimg.com/originals/25/1f/49/251f49b9061e3ef0b3a862135258f151.jpg']

ind_background = Math.floor(Math.random() * 5)

document.body.style.cssText = "background-image: url("+backgroundImages[ind_background]+");"


var param = window.location.href
var mode = 1;
var dificulty = 1;

if(window.innerHeight < 650 ){
  document.body.style.transform = "scale(0.7)"
  document.body.style.marginLeft = "-10%"
}

if(param.includes("mode=1")){
	mode = 1;
}else if(param.includes("mode=2")){
	mode = 2;
}

if(param.includes("dificuldade=1")){
	dificulty = 1;
}else if(param.includes("dificuldade=2")){
	dificulty = 2;
}else if(param.includes("dificuldade=3")){
	dificulty = 3;
}

if(mode ==1){
  for (var b=0; b < 7;b++){
    document.getElementsByClassName("btn2_vs_player")[b].style.cssText = "cursor:pointer;"    
  }
  
  //document.getElementsByClassName("card_player2")[0].style.transform = "translate(-115%,130%) rotate(180deg);" ;   

}else{
  document.getElementsByClassName("card_player2")[0].classList.remove("card_player2_");
}

function flashAnimation(player_id){
  document.getElementsByClassName("player_card_on")[player_id].style.animation = "flash_hit 0.5s"
   setTimeout(() => {
     document.getElementsByClassName("player_card_on")[player_id].style.animation= "none";
     
}, 490);  
}

function curse(player_id){
  ResizeAttack = " 0.7s"
  timeResize = "650"
  if(window.innerWidth <= 400){
    ResizeAttack = "Width 0.4s"
    timeResize = "350"
  }
  if(window.innerHeight >= 800){
    ResizeAttack = "Tablet 0.4s"
    timeResize = "350"
  }
  var crtTool
  if(player_id ==1 ){
    crtTool = current_tool1
  }
  if(player_id ==2 ){
    crtTool = current_tool2
  }
   
  if(player_id ==1){
   var energiaAmal = document.getElementsByClassName("energiaA")[1].innerHTML
   var vidaPlayer = document.getElementsByClassName("life")[1].innerHTML   

   if(document.getElementById("name_player1").innerHTML.includes("Choso") || document.getElementById("name_player1").innerHTML.includes("Kamo") || document.getElementById("name_player1").innerHTML.includes("Uraume")){
    document.getElementsByClassName("img_arrow")[0].src = "Image characters/blood_gif.gif"
  }


   if((energiaAmal < 0 || parseInt(crtTool["energiaA"]) < 0 ) && vidaPlayer > 0){
      // alteração cor  
      document.getElementById("arrow").style.cssText = "animation:arrow_attack1"+ResizeAttack+";display:block";
      //document.getElementById("arrow").style.cssText = "animation:arrow_attack1"+ResizeAttack+";display:block; filter:hue-rotate("+-180+"deg) contrast(400%);";
        document.getElementsByClassName("img_arrow")[0].style.cssText = "transform:rotate(120deg) scale(0.7);"
              
        if( document.getElementById("name_player1").innerHTML.includes("Uraume")){
          document.getElementsByClassName("img_arrow")[0].style.filter = "hue-rotate(205deg) brightness(150%)"
        }
	    document.getElementById("sound_curse").volume = 0.4
        document.getElementById("sound_curse").play()
        setTimeout(() => {
        document.getElementById("arrow").style.cssText = "display:none; filter: hue-rotate(0deg)";
          flashAnimation(0)
          calc_damage(2,1)
          document.getElementsByClassName("img_arrow")[0].src = "Image characters/fire_gif.gif"
          bot()
      }, timeResize);     
   }else{
      bot()
   } 

    
  }
  
  if(player_id == 2){
    var energiaAmal = document.getElementsByClassName("energiaA")[0].innerHTML
    var vidaPlayer = document.getElementsByClassName("life")[0].innerHTML   

    if(document.getElementById("name_player2").innerHTML.includes("Choso") || document.getElementById("name_player2").innerHTML.includes("Kamo") ||  document.getElementById("name_player2").innerHTML.includes("Uraume") ){
      document.getElementsByClassName("img_arrow")[0].src = "Image characters/blood_gif.gif"
    }


    if((energiaAmal < 0 || parseInt(crtTool["energiaA"]) < 0) & vidaPlayer > 0){
      document.getElementById("arrow").style.cssText = "animation:arrow_attack2"+ResizeAttack+";display:block;";
      document.getElementsByClassName("img_arrow")[0].style.cssText = "transform:rotate(290deg) scale(0.7);"
      if( document.getElementById("name_player2").innerHTML.includes("Uraume")){
        document.getElementsByClassName("img_arrow")[0].style.filter = "hue-rotate(205deg) brightness(150%)"
      }
	     document.getElementById("sound_curse").volume = 0.4
        document.getElementById("sound_curse").play()
   setTimeout(() => {
       document.getElementById("arrow").style.cssText = "display:none; filter: hue-rotate(0deg)";
       flashAnimation(1)
           calc_damage(2,2)
           document.getElementsByClassName("img_arrow")[0].src = "Image characters/fire_gif.gif"
  }, timeResize);  
    }
  }
  updateAttribute(player_id)
}

function spec(player_id){
  ResizeAttack = " 0.7s"
  timeResize = "650"
  if(window.innerWidth <= 400){
    ResizeAttack = "Width 0.4s"
    timeResize = "350"
  }

  if(window.innerHeight >= 800){
    ResizeAttack = "Tablet 0.4s"
    timeResize = "350"
  }
  

  if(player_id ==1 ){
    vidaPlayer = document.getElementsByClassName("life")[1].innerHTML   
    if(vidaRound[0]/2 > vidaPlayer && vidaPlayer > 0){
    	document.getElementById("sound_spc1").volume = 0.4
    	document.getElementById("sound_spc1").play()
      var effect = "180"
      if (document.getElementById("name_player1").innerHTML.includes("Gojo (Adult)")){
        effect = "55"
      }
      if(document.getElementById("name_player1").innerHTML.includes("Sukuna")){
        effect = "-150"
      }
      if(document.getElementById("name_player1").innerHTML.includes("Yuta")){
        effect = "100"
      }
     if(document.getElementById("name_player1").innerHTML.includes("Mahito")){
        effect = "45"
      }
      document.getElementById("arrow").style.cssText = "animation:arrow_attack1"+ResizeAttack+";display:block; filter:hue-rotate("+effect+"deg) contrast(200%);";

      if(document.getElementById("name_player1").innerHTML.includes("Yuki")){
        document.getElementById("arrow").style.cssText = "animation:arrow_attack1"+ResizeAttack+";display:block; filter:grayscale(100%) contrast(200%) brightness(30%);";
      }

      document.getElementsByClassName("img_arrow")[0].style.cssText = "transform:rotate(120deg) scale(0.7);"
      
      
     setTimeout(() => {
         document.getElementById("arrow").style.cssText = "display:none";
       flashAnimation(0)
       calc_damage(3,1)
       bot()
    }, timeResize); 
    }else{
       bot()
    }
   
  }
    
  if(player_id ==2 ){
    vidaPlayer = document.getElementsByClassName("life")[0].innerHTML
    if(vidaRound[1]/2 > vidaPlayer && vidaPlayer > 0){
	    document.getElementById("sound_spc2").volume = 0.4
      document.getElementById("sound_spc2").play()
      var effect = "180"
      if (document.getElementById("name_player2").innerHTML.includes("Gojo (Adult)")){
      //if (document.getElementById("name_player2").innerHTML == ""){
        effect = "55"
      }
      if(document.getElementById("name_player2").innerHTML.includes("Sukuna")){
        effect = "-150"
      }
      
      document.getElementById("arrow").style.cssText = "animation:arrow_attack2"+ResizeAttack+";display:block; filter:hue-rotate("+effect+"deg) contrast(200%);";
      if(document.getElementById("name_player2").innerHTML.includes("Yuki")){
        document.getElementById("arrow").style.cssText = "animation:arrow_attack2"+ResizeAttack+";display:block; filter:grayscale(100%) contrast(200%) brightness(30%);";
      }

      document.getElementsByClassName("img_arrow")[0].style.cssText = "transform:rotate(290deg) scale(0.7);"
     setTimeout(() => {
         document.getElementById("arrow").style.cssText = "display:none";
       flashAnimation(1)
       calc_damage(3,2)
    }, timeResize); 
    }
  }
  updateAttribute(player_id)
}

function attack(player_id){
  ResizeAttack = " 1s"
  timeResize = "950"
  if(window.innerWidth <= 400){
    ResizeAttack = "Width 0.4s"
    timeResize = "550"
    if(mode==1){
      ResizeAttack = "Width_ 0.4s"
    }
  }

  if(window.innerHeight >= 800){
    ResizeAttack = "Tablet 0.4s"
    timeResize = "550"
    if(mode==1){
      ResizeAttack = "Tablet_ 0.4s"
    }

  }
  
 if(player_id ==1){ 
  var vidaPlayer = document.getElementsByClassName("life")[1].innerHTML 
    
  
  if(vidaPlayer > 0){
    document.getElementById("tool_player1").style.cssText = "animation:rotate_tool 0.5s infinite;"
    document.getElementsByClassName("dtool_player1")[0].style.cssText = "animation:move_tool"+ResizeAttack+";"
  setTimeout(() => {
     document.getElementById("tool_player1").style.cssText = "animation:none";
    document.getElementsByClassName("dtool_player1")[0].style.cssText = "animation:none;"
    flashAnimation(0)
    calc_damage(1,1)
    bot()
    if(current_tool1['id'] == 14){
      document.getElementById("sound_punch").volume = 0.4
        document.getElementById("sound_punch").play()
    }else{
      document.getElementById("sound_stab").volume = 0.4
        document.getElementById("sound_stab").play()
    }
}, timeResize); 
}
  }
 
   if(player_id==2){ 
    var vidaPlayer = document.getElementsByClassName("life")[0].innerHTML  
    
    
  if(vidaPlayer > 0){
    document.getElementById("tool_player2").style.cssText = "animation:rotate_tool 0.5s infinite;"
  
    document.getElementsByClassName("dtool_player2")[0].style.cssText = "animation:move_tool2"+ResizeAttack+";"
    document.getElementsByClassName("player1")[0].style.cssText = "z-index:98;";  
  setTimeout(() => {
     document.getElementById("tool_player2").style.cssText = "animation:none";
    document.getElementsByClassName("dtool_player2")[0].style.cssText = "animation:none;";
      document.getElementsByClassName("player1")[0].style.cssText = "z-index:auto;";
    flashAnimation(1)
    calc_damage(1,2)
    if(current_tool2['id'] == 14){
      document.getElementById("sound_punch").volume = 0.4
        document.getElementById("sound_punch").play()
    }else{
      document.getElementById("sound_stab").volume = 0.4
        document.getElementById("sound_stab").play()
    }
}, timeResize); 
  }
   }
  
  updateAttribute(player_id)

}

var toolsp1 = []
var current_tool1 = cursed_tools[13]
var toolsp2 = []
var current_tool2 = cursed_tools[13]
function switch_tool(tool_id,player_id){
  document.getElementById("sound_switch").volume = 0.4
  document.getElementById("sound_switch").play()
  if(player_id ==1){
    
    if (tool_id ==1){

      image_tool = document.getElementById("tool1_p1").src;
      current_tool = document.getElementById("tool_player1").src;
      document.getElementById("tool_player1").src = image_tool;
      document.getElementById("tool1_p1").src = current_tool;
    }

    if (tool_id ==2){
      image_tool = document.getElementById("tool2_p1").src;
      current_tool = document.getElementById("tool_player1").src;
      document.getElementById("tool_player1").src = image_tool;
      document.getElementById("tool2_p1").src = current_tool;
    }

    if (tool_id ==3){
      image_tool = document.getElementById("tool3_p1").src;
      current_tool = document.getElementById("tool_player1").src;
      document.getElementById("tool_player1").src = image_tool;
      document.getElementById("tool3_p1").src = current_tool;
    }
    
      var curEnergy = toolsp1[tool_id-1]["energiaA"]
      var curAtt = toolsp1[tool_id-1]["ataque"]
      if(curEnergy != 0){
        document.getElementById("plus_energiaA1").innerHTML = curEnergy        
      }else{
        document.getElementById("plus_energiaA1").innerHTML = " "        
      }
      if(curAtt != 0){
        document.getElementById("plus_attA1").innerHTML = curAtt   
      }else{
        document.getElementById("plus_attA1").innerHTML = " "        
      }

      var temp_tool = current_tool1
      current_tool1 = toolsp1[tool_id-1]
      toolsp1[tool_id-1] = temp_tool
    
      var colorBorder="lightgray";
      


      if(vidaRound[0]/2 > parseInt(document.getElementsByClassName("life")[1].innerHTML) && (parseInt(document.getElementsByClassName("energiaA")[1].innerHTML) < 0 || parseInt(current_tool1["energiaA"]) < 0)){
            colorBorder = "lightgreen";
        }
     
     //var backgroundColor = ["background-image: linear-gradient(120deg, rgb(0,0,102), 20%, rgb(153, 102, 255), 40%, rgb(0,0,102));","background-image:linear-gradient(240deg, rgb(187,24,27), 20%, rgb(25,3,5), 50%, rgb(178,20,22))"]
     var backgroundColor = ["background-image: linear-gradient(120deg, rgb(0,0,102), 20%, rgb(153, 102, 255), 40%, rgb(0,0,102));","background-image:linear-gradient(240deg, rgb(187,24,27), 20%, rgb(25,3,5), 50%, rgb(178,20,22))"," background-image:linear-gradient(240deg, rgb(0, 0, 0), 60%, rgb(27, 27, 27), 90%, rgb(27, 27, 27))"]
     var idBackground = 0
    if(characters[id_selected[curIndex[0]]]["estilo"] == "n_humano"){
      idBackground=1;
    }

    if(document.getElementById("name_player1").innerHTML.includes("Mahoraga") || document.getElementById("name_player1").innerHTML.includes("Higuruma") ){
      idBackground=2;
    }
    
    
    
     document.getElementsByClassName("player_card_on")[1].style.cssText = "border-color:"+colorBorder+";"+backgroundColor[idBackground];
  }
  
  //cor uso ferramenta
  var colorLife
  if(player_id ==1){
    
    //if (tool_id ==1){
      if((toolsp1[tool_id-1]["energiaA"]*(-1)+toolsp1[tool_id-1]["ataque"] == toolsp1[tool_id-1]["life"]) || toolsp1[tool_id-1]["life"] == -1){
        colorLife= "rgb(50,250,50)";       
      }else if(toolsp1[tool_id-1]["energiaA"]*(-1)+toolsp1[tool_id-1]["ataque"] < toolsp1[tool_id-1]["life"] && (toolsp1[tool_id-1]["energiaA"]*(-1)+toolsp1[tool_id-1]["ataque"] >= toolsp1[tool_id-1]["life"]*0.75)){
        colorLife= "rgb(250,250,50)";       
      }else if(toolsp1[tool_id-1]["energiaA"]*(-1)+toolsp1[tool_id-1]["ataque"] < toolsp1[tool_id-1]["life"]*0.75 && (toolsp1[tool_id-1]["energiaA"]*(-1)+toolsp1[tool_id-1]["ataque"] != 0)){
        colorLife= "rgb(250,150,50)";       
      }else if(toolsp1[tool_id-1]["energiaA"]*(-1)+toolsp1[tool_id-1]["ataque"] == 0){
        colorLife= "rgb(240,50,50)";       
      }
      document.getElementsByClassName("tool_btn")[tool_id+2].style.borderColor = colorLife
      //}
    }
  
  if(player_id ==2){
    if (tool_id ==1){
      image_tool = document.getElementById("tool1_p2").src;
      current_tool = document.getElementById("tool_player2").src;
      document.getElementById("tool_player2").src = image_tool;
      document.getElementById("tool1_p2").src = current_tool;
    }

    if (tool_id ==2){
      image_tool = document.getElementById("tool2_p2").src;
      current_tool = document.getElementById("tool_player2").src;
      document.getElementById("tool_player2").src = image_tool;
      document.getElementById("tool2_p2").src = current_tool;
    }

    if (tool_id ==3){
      image_tool = document.getElementById("tool3_p2").src;
      current_tool = document.getElementById("tool_player2").src;
      document.getElementById("tool_player2").src = image_tool;
      document.getElementById("tool3_p2").src = current_tool;
    }
    
    var curEnergy = toolsp2[tool_id-1]["energiaA"]
    var curAtt = toolsp2[tool_id-1]["ataque"]
      if(curEnergy != 0){
        document.getElementById("plus_energiaA2").innerHTML = curEnergy   
      }else{
        document.getElementById("plus_energiaA2").innerHTML = " "        
      }
    if(curAtt != 0){
        document.getElementById("plus_attA2").innerHTML = curAtt   
      }else{
        document.getElementById("plus_attA2").innerHTML = " "        
      }
    

      var temp_tool = current_tool2
      current_tool2 = toolsp2[tool_id-1]
      toolsp2[tool_id-1] = temp_tool
    
          var colorBorder ="lightgray"

      if(vidaRound[1]/2 > parseInt(document.getElementsByClassName("life")[0].innerHTML) && (parseInt(document.getElementsByClassName("energiaA")[0].innerHTML) < 0 || parseInt(current_tool2["energiaA"]) < 0)){
            colorBorder = "lightgreen";
            
      }
    
    //var backgroundColor = ["background-image: linear-gradient(120deg, rgb(0,0,102), 20%, rgb(153, 102, 255), 40%, rgb(0,0,102));","background-image:linear-gradient(240deg, rgb(187,24,27), 20%, rgb(25,3,5), 50%, rgb(178,20,22))"]
    var backgroundColor = ["background-image: linear-gradient(120deg, rgb(0,0,102), 20%, rgb(153, 102, 255), 40%, rgb(0,0,102));","background-image:linear-gradient(240deg, rgb(187,24,27), 20%, rgb(25,3,5), 50%, rgb(178,20,22))"," background-image:linear-gradient(240deg, rgb(0, 0, 0), 60%, rgb(27, 27, 27), 90%, rgb(27, 27, 27))"] 
    var idBackground = 0
    if(characters[id_selected[curIndex[1]]]["estilo"] == "n_humano"){
      idBackground=1;
    }

    if(document.getElementById("name_player2").innerHTML.includes("Mahoraga") || document.getElementById("name_player2").innerHTML.includes("Higuruma") ){
      idBackground=2;
    }
   
     document.getElementsByClassName("player_card_on")[0].style.cssText = "border-color:"+colorBorder+";"+backgroundColor[idBackground];

  }
  
  if(player_id ==2){
    
      if((toolsp2[tool_id-1]["energiaA"]*(-1)+toolsp2[tool_id-1]["ataque"] == toolsp2[tool_id-1]["life"]) || toolsp2[tool_id-1]["life"] == -1){
        colorLife= "rgb(50,250,50)";       
      }else if(toolsp2[tool_id-1]["energiaA"]*(-1)+toolsp2[tool_id-1]["ataque"] < toolsp2[tool_id-1]["life"] && (toolsp2[tool_id-1]["energiaA"]*(-1)+toolsp2[tool_id-1]["ataque"] >= toolsp2[tool_id-1]["life"]*0.75)){
        colorLife= "rgb(250,250,50)";       
      }else if(toolsp2[tool_id-1]["energiaA"]*(-1)+toolsp2[tool_id-1]["ataque"] < toolsp2[tool_id-1]["life"]*0.75 && (toolsp2[tool_id-1]["energiaA"]*(-1)+toolsp2[tool_id-1]["ataque"] != 0)){
        colorLife= "rgb(250,150,50)";       
      }else if(toolsp2[tool_id-1]["energiaA"]*(-1)+toolsp2[tool_id-1]["ataque"] == 0){
        colorLife= "rgb(240,50,50)";       
      }
      document.getElementsByClassName("tool_btn")[tool_id-1].style.borderColor = colorLife
      //}
    }
}
//trocar
var countLoss = [0,0]
function select_card(numberDeck,player_id){
  var i = 0
  var conc = ""
  document.getElementById("sound_flip").volume = 0.4
  document.getElementById("sound_flip").play()
  if(player_id==1){
    //countLoss[0] += 1;
    i=1
    updateOnCard(numberDeck-1,player_id)
    updateAttribute(2)
    
  }else if(player_id==2){
    //countLoss[1] += 1;
    i=0
    conc = "_2"
    updateOnCard(numberDeck+6,player_id)
    updateAttribute(1)
    bot()   
  }
        for(var l=0; l<14;l++){
            document.getElementsByClassName("select_card")[l].style.visibility= "hidden";
          } 
    document.getElementById("card_deck"+numberDeck+conc).style.visibility = "hidden";
    var countDeath = 0
    for (var n=1; n < 8;n++){
      if((document.getElementById("card_deck"+n+conc).style.visibility)=="hidden"){
        countDeath +=1
      }
      
    }
    countLoss[player_id -1] = countDeath;
    //dodge(player_id)
  
}

function dodge(player_id){
    document.getElementById("sound_dodge").volume = 0.3
    document.getElementById("sound_dodge").play()
  if(player_id==1){
    var colorBorder ="lightgray"
    if(vidaRound[0]/2 > parseInt(document.getElementsByClassName("life")[1].innerHTML) && (parseInt(document.getElementsByClassName("energiaA")[1].innerHTML) < 0 || parseInt(current_tool1["energiaA"]) < 0)){
            colorBorder = "lightgreen"
        }
    //var backgroundColor = ["background-image: linear-gradient(120deg, rgb(0,0,102), 20%, rgb(153, 102, 255), 40%, rgb(0,0,102));","background-image:linear-gradient(240deg, rgb(187,24,27), 20%, rgb(25,3,5), 50%, rgb(178,20,22))"]
    var backgroundColor = ["background-image: linear-gradient(120deg, rgb(0,0,102), 20%, rgb(153, 102, 255), 40%, rgb(0,0,102));","background-image:linear-gradient(240deg, rgb(187,24,27), 20%, rgb(25,3,5), 50%, rgb(178,20,22))"," background-image:linear-gradient(240deg, rgb(0, 0, 0), 60%, rgb(27, 27, 27), 90%, rgb(27, 27, 27))"]
    var idBackground = 0
     var idBackground2 = 0
    if(characters[id_selected[curIndex[0]]]["estilo"] == "n_humano"){
      idBackground2=1
    }
    if(characters[id_selected[curIndex[1]]]["estilo"] == "n_humano"){
      idBackground=1;
    }
    if(document.getElementById("name_player2").innerHTML.includes("Mahoraga")  || document.getElementById("name_player2").innerHTML.includes("Higuruma")){
      idBackground=2;
    }

    if(document.getElementById("name_player1").innerHTML.includes("Mahoraga")  || document.getElementById("name_player1").innerHTML.includes("Higuruma")){
      idBackground2=2;
    }
    
     document.getElementsByClassName("player_card_on")[0].style.cssText = "border-color:"+colorBorder+";opacity:1;"+backgroundColor[idBackground];
    document.getElementsByClassName("player_card_on")[1].style.cssText = "border-color: rgb(50,50,252);opacity:0.7;"+backgroundColor[idBackground2]; 
    /*
    document.getElementsByClassName("player_card_on")[0].style.cssText = "border-color:lightgray;opacity:1";
    document.getElementsByClassName("player_card_on")[1].style.cssText = "border-color: rgb(50,50,252);opacity:0.7";   
    */
    bot()
  }

    if(player_id==2){
      var colorBorder ="lightgray"  
    if(vidaRound[1]/2 > parseInt(document.getElementsByClassName("life")[0].innerHTML) && (parseInt(document.getElementsByClassName("energiaA")[0].innerHTML) < 0 || parseInt(current_tool2["energiaA"]) < 0)){
            colorBorder = "lightgreen";
            
        }
    //var backgroundColor = ["background-image: linear-gradient(120deg, rgb(0,0,102), 20%, rgb(153, 102, 255), 40%, rgb(0,0,102));","background-image:linear-gradient(240deg, rgb(187,24,27), 20%, rgb(25,3,5), 50%, rgb(178,20,22))"]
    var backgroundColor = ["background-image: linear-gradient(120deg, rgb(0,0,102), 20%, rgb(153, 102, 255), 40%, rgb(0,0,102));","background-image:linear-gradient(240deg, rgb(187,24,27), 20%, rgb(25,3,5), 50%, rgb(178,20,22))"," background-image:linear-gradient(240deg, rgb(0, 0, 0), 60%, rgb(27, 27, 27), 90%, rgb(27, 27, 27))"]
    var idBackground = 0
     var idBackground2 = 0
    if(characters[id_selected[curIndex[0]]]["estilo"] == "n_humano"){
      idBackground2=1
    }
    if(characters[id_selected[curIndex[1]]]["estilo"] == "n_humano"){
      idBackground=1;
    }

    if(document.getElementById("name_player2").innerHTML.includes("Mahoraga")  || document.getElementById("name_player2").innerHTML.includes("Higuruma")){
      idBackground=2;
    }

    if(document.getElementById("name_player1").innerHTML.includes("Mahoraga")  || document.getElementById("name_player1").innerHTML.includes("Higuruma")){
      idBackground2=2;
    }
    
     document.getElementsByClassName("player_card_on")[1].style.cssText = "border-color:"+colorBorder+";opacity:1;"+backgroundColor[idBackground2];
    document.getElementsByClassName("player_card_on")[0].style.cssText = "border-color: rgb(50,50,252);opacity:0.7;"+backgroundColor[idBackground]; 
      /*
    document.getElementsByClassName("player_card_on")[1].style.cssText = "border-color:lightgray;opacity:1";
    document.getElementsByClassName("player_card_on")[0].style.cssText = "border-color: rgb(50,50,252);opacity:0.7";    
    */
  }
  var vidaPlayer1 = document.getElementsByClassName("life")[1].innerHTML   
  var vidaPlayer2 = document.getElementsByClassName("life")[0].innerHTML   
  if( vidaPlayer1 > 0 && vidaPlayer2>0){
    calc_damage(4,player_id)
  }
  updateAttribute(player_id)
}


//-------------------------------------------------------------

//mode_deck = 1
var id_selected = []
var names_deck1 = []
var names_deck2 = []
var id_selected_tools = []
var rangeDeck = 0
document.body.onload = () => {
  
      if(dificulty==1){
        rangeDeck = 31
      }else{
        rangeDeck = 39
      }  
       
      //sem as cartas OP:
      while (id_selected.length < rangeDeck) {
        const nAleatorio = Math.floor(Math.random() * rangeDeck) + 1;
      //while (id_selected.length < 32) {
      //  const nAleatorio = Math.floor(Math.random() * 32) + 1;
        if (!id_selected.includes(nAleatorio)) {
            id_selected.push(nAleatorio);
          }
        }
        while (id_selected_tools.length < 13) {
        const nAleatorio = Math.floor(Math.random() * 13) + 1;
        if (!id_selected_tools.includes(nAleatorio)) {
          id_selected_tools.push(nAleatorio);
        }
      }
    
    
  for( var i = 0; i< id_selected.length;i++){
    if (i < 7){
      document.getElementById("name_card_deck_player1_"+String(i+1)).innerHTML = characters[id_selected[i]]["nome"]
      source_image = 'Image characters/'+ characters[id_selected[i]]["id"]+'.png'
      document.getElementById("image_card_deck_player_1_"+String(i+1)).src = source_image
    }if(i >=7 && i < 14){
      document.getElementById("name_card_deck_player2_"+String(i-6)).innerHTML = characters[id_selected[i]]["nome"]
      source_image = 'Image characters/'+ characters[id_selected[i]]["id"]+'.png'
      document.getElementById("image_card_deck_player_2_"+String(i-6)).src = source_image 
    }
    //para ferramentas
    if(i <3){
      
      id1 = 'Image characters/tool'+String(id_selected_tools[i])+'.png';
      
      document.getElementById("tool"+(i+1)+"_p1").src = id1 
      document.getElementsByClassName("tool_btn")[i].style.borderColor = "rgb(50,250,50)";
    }
    if(i >=3 && i <6){
      id2 ='Image characters/tool'+String(id_selected_tools[i])+'.png';
      document.getElementById("tool"+(i-2)+"_p2").src = id2
      document.getElementsByClassName("tool_btn")[i].style.borderColor = "rgb(50,250,50)";
    }
    
  }
  
  for (var k=0;k<3;k++){
      toolsp1[k] = cursed_tools[id_selected_tools[k]-1]  
    }
  for (var k=3;k<6;k++){
      toolsp2[k-3] = cursed_tools[id_selected_tools[k]-1]  
    }
  
  updateOnCard(14,1)
  updateOnCard(15,2)

  
};

var vidaRound = [0,0]
var vidaRegen = [0,0]
var curIndex = [0,0]
var curEstilo = ["",""]
function updateOnCard(index_,player_id){
  var current_player_id = 0
  if(player_id == 1){
    curIndex[0] = index_
    document.getElementById("img_active_player1").src = source_image = 'Image characters/'+ characters[id_selected[index_]]["id"]+'.png';
  document.getElementById("name_player1").innerHTML = characters[id_selected[index_]]["nome"];
    document.getElementById("vida1").value = characters[id_selected[index_]]["vida"];
    document.getElementById("vida1").max = characters[id_selected[index_]]["vida"];
    vidaRound[0] = parseInt(characters[id_selected[index_]]["vida"])
    vidaRegen[0] = parseInt(characters[id_selected[index_]]["vida"]);
    curEstilo[0] = characters[id_selected[index_]]["estilo"]
    vidaRound[1] = parseInt(document.getElementsByClassName("life")[0].innerHTML) 
    

    current_player_id = 1 
    
    var backgroundColor = ["linear-gradient(120deg, rgb(0,0,102), 20%, rgb(153, 102, 255), 40%, rgb(0,0,102));","linear-gradient(240deg, rgb(187,24,27), 20%, rgb(25,3,5), 50%, rgb(178,20,22))","linear-gradient(240deg, rgb(0, 0, 0), 60%, rgb(27, 27, 27), 90%, rgb(27, 27, 27))"]
     var idBackground2 = 0
    //if(characters[id_selected[curIndex[1]]]["estilo"] == "n_humano"){
    //  idBackground=1
    //}
    if(characters[id_selected[curIndex[0]]]["estilo"] == "n_humano"){
      idBackground2=1
    }

    if(document.getElementById("name_player1").innerHTML.includes("Mahoraga")  || document.getElementById("name_player1").innerHTML.includes("Higuruma")){
      idBackground2=2;
    }
    

    document.getElementsByClassName("player_card_on")[current_player_id].style.backgroundImage = backgroundColor[idBackground2];
  }
   if(player_id == 2){
     curIndex[1] = index_
     document.getElementById("img_active_player2").src = source_image = 'Image characters/'+characters[id_selected[index_]]["id"]+'.png';
  document.getElementById("name_player2").innerHTML = characters[id_selected[index_]]["nome"];
     document.getElementById("vida2").value = characters[id_selected[index_]]["vida"];
     document.getElementById("vida2").max = characters[id_selected[index_]]["vida"];
     vidaRound[1] = parseInt(characters[id_selected[index_]]["vida"]);
     vidaRegen[1] = parseInt(characters[id_selected[index_]]["vida"]);
     curEstilo[1] = characters[id_selected[index_]]["estilo"]
     //new_line
     vidaRound[0] = parseInt(document.getElementsByClassName("life")[1].innerHTML); 
     current_player_id = 0

    //var backgroundColor = ["linear-gradient(120deg, rgb(0,0,102), 20%, rgb(153, 102, 255), 40%, rgb(0,0,102));","linear-gradient(240deg, rgb(187,24,27), 20%, rgb(25,3,5), 50%, rgb(178,20,22))"]
    var backgroundColor = ["linear-gradient(120deg, rgb(0,0,102), 20%, rgb(153, 102, 255), 40%, rgb(0,0,102));","linear-gradient(240deg, rgb(187,24,27), 20%, rgb(25,3,5), 50%, rgb(178,20,22))","linear-gradient(240deg, rgb(0, 0, 0), 60%, rgb(27, 27, 27), 90%, rgb(27, 27, 27))"]
    var idBackground = 0
     //var idBackground2 = 0
    if(characters[id_selected[curIndex[1]]]["estilo"] == "n_humano"){
      idBackground=1
    }
    //if(characters[id_selected[curIndex[0]]]["estilo"] == "n_humano"){
    //  idBackground2=1
    //}s
    if(document.getElementById("name_player2").innerHTML.includes("Mahoraga")  || document.getElementById("name_player2").innerHTML.includes("Higuruma")){
      idBackground=2;
    }

    document.getElementsByClassName("player_card_on")[current_player_id].style.backgroundImage = backgroundColor[idBackground];
   }
  
  document.getElementsByClassName("ataque")[current_player_id].innerHTML = characters[id_selected[index_]]["ataque"];
  document.getElementsByClassName("defesa")[current_player_id].innerHTML = characters[id_selected[index_]]["defesa"];
  document.getElementsByClassName("energiaAR")[current_player_id].innerHTML = characters[id_selected[index_]]["energiaAR"];
  document.getElementsByClassName("energiaA")[current_player_id].innerHTML = characters[id_selected[index_]]["energiaA"];
  document.getElementsByClassName("life")[current_player_id].innerHTML = characters[id_selected[index_]]["vida"];
   
  //juiz
  if(document.getElementById("name_player1").innerHTML.includes("Higuruma") ){
    document.getElementsByClassName("energiaA")[1].innerHTML = document.getElementsByClassName("energiaA")[0].innerHTML;
  }
  if(document.getElementById("name_player2").innerHTML.includes("Higuruma") ){
    document.getElementsByClassName("energiaA")[0].innerHTML = document.getElementsByClassName("energiaA")[1].innerHTML;
  }


}

function end_game(status){  
  var win = ""
  var walp = ["","",""]
  if(status==1){
    win = 'Image characters/player_1_win.png' 
    walp[1] = "url('you win.jpg')"
  }else{
    win = 'Image characters/player_2_win.png'
    walp[2] = "url('you lose.jpg')"
  }
  
  
  var clsSpam = ""
  if(window.innerWidth <= 400){
        clsSpam = "end_game_imageWidth"
    
  }else  if(window.innerHeight >= 800){
    clsSpam = "end_game_imageTablet"
  }else{
    clsSpam = "end_game_image"
  }
    document.body.innerHTML += "<span class='end_game'><img src='"+win+"' alt='' class="+clsSpam+" onclick=' reset()'> </span>";
    document.getElementsByClassName("end_game")[0].style.backgroundImage = walp[status]

    if(mode == 1 && status == 2 && (window.innerWidth <= 400) ){
      document.getElementsByClassName("end_game")[0].style.transform = "rotate(180deg)"
      document.getElementsByClassName("end_game")[0].style.marginLeft = "-35%"
    }

    if(mode == 1 && status == 2 && (window.innerHeight >= 800) ){
      document.getElementsByClassName("end_game")[0].style.transform = "rotate(180deg)"
      document.getElementsByClassName("end_game")[0].style.marginLeft = "-10%"
    }

    document.getElementById("end_game_sound").volume = 0.25
        document.getElementById("end_game_sound").play()
  }
  
function updateAttribute(player_id,index_=0){

  setTimeout(() => {
  
    
    var colorBorder = "lightgray";

  if(player_id == 1){
    //mahoraga
    if(document.getElementById("name_player2").innerHTML.includes("Mahoraga")){
      document.getElementsByClassName("defesa")[0].innerHTML = document.getElementsByClassName("ataque")[1].innerHTML ;
    }

    document.getElementsByClassName("attack_btn")[1].removeAttribute("onclick")
    document.getElementsByClassName("curse_btn")[1].removeAttribute("onclick")
    document.getElementsByClassName("dodge_btn")[1].removeAttribute("onclick")
    document.getElementsByClassName("special_btn")[1].removeAttribute("onclick")
    document.getElementsByClassName("tool_btn")[3].removeAttribute("onclick")
    document.getElementsByClassName("tool_btn")[4].removeAttribute("onclick")
    document.getElementsByClassName("tool_btn")[5].removeAttribute("onclick")
    //outro jogador:
    if(mode ==1){
      document.getElementsByClassName("attack_btn")[0].setAttribute("onclick","attack(2)")
      document.getElementsByClassName("curse_btn")[0].setAttribute("onclick","curse(2)")
      document.getElementsByClassName("dodge_btn")[0].setAttribute("onclick","dodge(2)")
      document.getElementsByClassName("special_btn")[0].setAttribute("onclick","spec(2)")
      document.getElementsByClassName("tool_btn")[0].setAttribute("onclick","switch_tool(1,2)")
      document.getElementsByClassName("tool_btn")[1].setAttribute("onclick","switch_tool(2,2)")
      document.getElementsByClassName("tool_btn")[2].setAttribute("onclick","switch_tool(3,2)")      
    }

    
      
    //switch_tool(tool_id,player_id)

        //if(vidaRound[0]/2 > parseInt(document.getElementsByClassName("life")[1].innerHTML) && (parseInt(document.getElementsByClassName("energiaA")[1].innerHTML) < 0 || parseInt(current_tool1["energiaA"]) < 0)){
       //     colorBorder = "green";
      //  }
    
      //if(vidaRound[1]/2 > parseInt(document.getElementsByClassName("life")[0].innerHTML) && (parseInt(document.getElementsByClassName("energiaA")[0].innerHTML) < 0 || parseInt(current_tool["energiaA"]) < 0)){
        if(vidaRound[1]/2 > parseInt(document.getElementsByClassName("life")[0].innerHTML) && (parseInt(document.getElementsByClassName("energiaA")[0].innerHTML) < 0 || parseInt(current_tool2["energiaA"]) < 0)){      
            colorBorder = "lightgreen";
        }
    
    var backgroundColor = ["background-image: linear-gradient(120deg, rgb(0,0,102), 20%, rgb(153, 102, 255), 40%, rgb(0,0,102));","background-image:linear-gradient(240deg, rgb(187,24,27), 20%, rgb(25,3,5), 50%, rgb(178,20,22))","background-image:linear-gradient(240deg, rgb(0, 0, 0), 60%, rgb(27, 27, 27), 90%, rgb(27, 27, 27))"]
     var idBackground = 0
     var idBackground2 = 0
    if(characters[id_selected[curIndex[0]]]["estilo"] == "n_humano"){
      idBackground2=1
    }
    if(characters[id_selected[curIndex[1]]]["estilo"] == "n_humano"){
      idBackground=1;
    }

    if(document.getElementById("name_player1").innerHTML.includes("Mahoraga")  || document.getElementById("name_player1").innerHTML.includes("Higuruma")){
      idBackground2=2;
    }

    if(document.getElementById("name_player2").innerHTML.includes("Mahoraga")  || document.getElementById("name_player2").innerHTML.includes("Higuruma")){
      idBackground=2;
    }
    
     document.getElementsByClassName("player_card_on")[0].style.cssText = "border-color:"+colorBorder+";opacity:1;"+backgroundColor[idBackground];
    document.getElementsByClassName("player_card_on")[1].style.cssText = "border-color: rgb(50,50,252);opacity:0.7;"+backgroundColor[idBackground2]; 
    
  }
  
  if(player_id == 2){
    //mahoraga
    if(document.getElementById("name_player1").innerHTML.includes("Mahoraga")){
      document.getElementsByClassName("defesa")[1].innerHTML = document.getElementsByClassName("ataque")[0].innerHTML ;
    }
    document.getElementsByClassName("attack_btn")[0].removeAttribute("onclick")
    document.getElementsByClassName("curse_btn")[0].removeAttribute("onclick")
    document.getElementsByClassName("dodge_btn")[0].removeAttribute("onclick")
    document.getElementsByClassName("special_btn")[0].removeAttribute("onclick")
    document.getElementsByClassName("tool_btn")[0].removeAttribute("onclick")
    document.getElementsByClassName("tool_btn")[1].removeAttribute("onclick")
    document.getElementsByClassName("tool_btn")[2].removeAttribute("onclick")
        //outro jogador:
    document.getElementsByClassName("attack_btn")[1].setAttribute("onclick","attack(1)")
    document.getElementsByClassName("curse_btn")[1].setAttribute("onclick","curse(1)")
    document.getElementsByClassName("dodge_btn")[1].setAttribute("onclick","dodge(1)")
    document.getElementsByClassName("special_btn")[1].setAttribute("onclick","spec(1)")
    document.getElementsByClassName("tool_btn")[3].setAttribute("onclick","switch_tool(1,1)")
    document.getElementsByClassName("tool_btn")[4].setAttribute("onclick","switch_tool(2,1)")
    document.getElementsByClassName("tool_btn")[5].setAttribute("onclick","switch_tool(3,1)")
    

        if(vidaRound[0]/2 > parseInt(document.getElementsByClassName("life")[1].innerHTML) && (parseInt(document.getElementsByClassName("energiaA")[1].innerHTML) < 0 || parseInt(current_tool1["energiaA"]) < 0)){
          colorBorder = "lightgreen";
          
        }
     
     var backgroundColor = ["background-image: linear-gradient(120deg, rgb(0,0,102), 20%, rgb(153, 102, 255), 40%, rgb(0,0,102));","background-image:linear-gradient(240deg, rgb(187,24,27), 20%, rgb(25,3,5), 50%, rgb(178,20,22))"," background-image:linear-gradient(240deg, rgb(0, 0, 0), 60%, rgb(27, 27, 27), 90%, rgb(27, 27, 27))"]
     var idBackground = 0
     var idBackground2 = 0
    if(characters[id_selected[curIndex[1]]]["estilo"] == "n_humano"){
      idBackground2=1
    }
    if(characters[id_selected[curIndex[0]]]["estilo"] == "n_humano"){
      idBackground=1;
    }
    
    if(document.getElementById("name_player1").innerHTML.includes("Mahoraga")  || document.getElementById("name_player1").innerHTML.includes("Higuruma")){
      idBackground=2;
    }
      
    if(document.getElementById("name_player2").innerHTML.includes("Mahoraga")  || document.getElementById("name_player2").innerHTML.includes("Higuruma")){
      idBackground2=2;
    }
    
     document.getElementsByClassName("player_card_on")[1].style.cssText = "border-color:"+colorBorder+";opacity:1;"+backgroundColor[idBackground];
    document.getElementsByClassName("player_card_on")[0].style.cssText = "border-color: rgb(50,50,252);opacity:0.7;"+backgroundColor[idBackground2]; 
    
    
  }
   

 
  }, 290);  
}

function calc_damage(type_damage, player_id){
  var dano
  var vida_oponente
  var defesa
  var energiaAmal
  var vidaPlayer
  var i, j, c
  var crtTool, danoIni
  if(player_id ==1 ){
    i = 1
    j = 0
    c = "2"
    crtTool = current_tool1
  }
  if(player_id ==2 ){
    i = 0
    j = 1
    c = "1"
    crtTool = current_tool2
  }
        dano = parseInt(document.getElementsByClassName("ataque")[i].innerHTML)
        vida_oponente = parseInt(document.getElementsByClassName("life")[j].innerHTML)
        defesa = parseInt(document.getElementsByClassName("defesa")[j].innerHTML)
        energiaAmal = parseInt(document.getElementsByClassName("energiaA")[i].innerHTML)
        vidaPlayer = parseInt(document.getElementsByClassName("life")[i].innerHTML)
  
      if (type_damage == 1){
        if(dano + parseInt(crtTool["ataque"]) >= defesa ){
          dano = ((dano) + parseInt(crtTool["ataque"])) - (defesa)
        }else{
          dano = 0
        }
        if( crtTool["ataque"] - 1 >0){
          crtTool["ataque"] -= 1      
        }else{
          crtTool["ataque"] = 0
        }
        
        if(crtTool["ataque"] != 0){
          document.getElementById("plus_attA"+player_id).innerHTML = crtTool["ataque"]   
        }else{
          document.getElementById("plus_attA"+player_id).innerHTML = " "        
        }

        document.getElementsByClassName("life")[j].innerHTML = vida_oponente - dano
        document.getElementById("vida"+c).value = vida_oponente - dano 
        document.getElementsByClassName("defesa")[j].innerHTML = defesa - 1
        damage_animation(dano, player_id)
      }else if(type_damage ==2){
        
        if(energiaAmal < 0){
          document.getElementsByClassName("life")[j].innerHTML = vida_oponente - dano
          document.getElementById("vida"+c).value = vida_oponente - dano
          document.getElementsByClassName("defesa")[j].innerHTML = defesa - 1
          
          if(parseInt(energiaAmal) + parseInt(dano) < 0){
            document.getElementsByClassName("energiaA")[i].innerHTML = parseInt(energiaAmal) + parseInt(dano)            
          }else{
            document.getElementsByClassName("energiaA")[i].innerHTML = 0;
          }
          if(dificulty==3){
              if(vidaPlayer -parseInt(dano/2) >0){
                document.getElementsByClassName("life")[i].innerHTML =   vidaPlayer - dano/2  
                //alppp
                if( c == "1"){
                  document.getElementById("vida2").value = document.getElementsByClassName("life")[i].innerHTML         
                }else{
                  document.getElementById("vida1").value = document.getElementsByClassName("life")[i].innerHTML         
                }

              }
            } 
            damage_animation(dano, player_id)
        }else{
          if(parseInt(crtTool["energiaA"]) < 0){
            document.getElementsByClassName("life")[j].innerHTML = vida_oponente - dano
            document.getElementById("vida"+c).value = vida_oponente - dano
            document.getElementsByClassName("defesa")[j].innerHTML = defesa - 1
            damage_animation(dano, player_id)
           if( crtTool["energiaA"] +  parseInt(dano) < 0){
              crtTool["energiaA"] =  parseInt(crtTool["energiaA"]) + parseInt(dano)  
             document.getElementById("plus_energiaA"+player_id).innerHTML = crtTool["energiaA"]
            }else{
              crtTool["energiaA"] = 0
              document.getElementById("plus_energiaA"+player_id).innerHTML = " "   
            }
          }
          
        }

      }else if(type_damage ==3){
        if(energiaAmal < 0){
          if(vidaRound[j]/2 > vidaPlayer){
            document.getElementsByClassName("life")[j].innerHTML = vida_oponente - (dano - energiaAmal)
            document.getElementById("vida"+c).value = vida_oponente - (dano - energiaAmal)
		  if(parseInt(document.getElementsByClassName("defesa")[j].innerHTML)  <= 0){
			  document.getElementsByClassName("defesa")[j].innerHTML = parseInt(document.getElementsByClassName("defesa")[j].innerHTML) - 1
		  }else{
            		document.getElementsByClassName("defesa")[j].innerHTML = 0		  
		  }
            document.getElementsByClassName("energiaA")[i].innerHTML = 0
            damage_animation(dano - energiaAmal, player_id)
            
          }
        }else{
          if(parseInt(crtTool["energiaA"]) < 0){
            document.getElementsByClassName("life")[j].innerHTML = vida_oponente - (dano - parseInt(crtTool["energiaA"]))
            document.getElementById("vida"+c).value = vida_oponente - (dano - parseInt(crtTool["energiaA"]))
            if(parseInt(document.getElementsByClassName("defesa")[j].innerHTML)  <= 0){
              document.getElementsByClassName("defesa")[j].innerHTML = parseInt(document.getElementsByClassName("defesa")[j].innerHTML) - 1
            }else{
                      document.getElementsByClassName("defesa")[j].innerHTML = 0		  
            }
            var dmg =   parseInt(dano) - parseInt(crtTool["energiaA"])
            damage_animation((dmg), player_id)
              crtTool["energiaA"] = 0
              document.getElementById("plus_energiaA"+player_id).innerHTML = " " 
              
          }
        } 
      }else if(type_damage ==4){
        if((vidaRound[j] > vidaPlayer) || (vidaRegen[j] > vidaPlayer)){
          if(document.getElementsByClassName("energiaAR")[i].innerHTML >0){
            if(document.getElementsByClassName("energiaAR")[i].innerHTML - 20 > 0){
              document.getElementsByClassName("energiaAR")[i].innerHTML -= 20              
            }else{
              document.getElementsByClassName("energiaAR")[i].innerHTML = 0              
            }

            document.getElementsByClassName("life")[i].innerHTML = parseInt(document.getElementsByClassName("life")[i].innerHTML) + 20
             document.getElementById("vida"+(j+1)).value = document.getElementsByClassName("life")[i].innerHTML
          }
          
          if(curEstilo[j]=="n_humano"){
            if(document.getElementsByClassName("energiaA")[i].innerHTML <0){
            if(parseInt(document.getElementsByClassName("energiaA")[i].innerHTML) + 20 < 0){
              document.getElementsByClassName("energiaA")[i].innerHTML = parseInt(document.getElementsByClassName("energiaA")[i].innerHTML) + 20   
            }else{
              document.getElementsByClassName("energiaA")[i].innerHTML = 0              
            }

            document.getElementsByClassName("life")[i].innerHTML = parseInt(document.getElementsByClassName("life")[i].innerHTML) + 20
             document.getElementById("vida"+(j+1)).value = document.getElementsByClassName("life")[i].innerHTML
          }
          }

        }
      }   
      if(parseInt(document.getElementsByClassName("life")[j].innerHTML) <= 0){
          if(countLoss[i] == 7){
            end_game(player_id)
          }  
        }
  
 
    if(parseInt(document.getElementsByClassName("life")[j].innerHTML) <= 0){

       
        document.getElementsByClassName("life")[j].innerHTML = 0;
        vidaRound[j]=document.getElementsByClassName("life")[i].innerHTML
        
          //countLoss[j] += 1
       if(player_id ==1 ){
         
         for(var l=7; l<14;l++){
            document.getElementsByClassName("select_card")[l].style.visibility= "visible";
          }          
       }else{
         for(var l=0; l<7;l++){
            document.getElementsByClassName("select_card")[l].style.visibility= "visible";
          }

       }

        document.getElementsByClassName("attack_btn")[j].removeAttribute("onclick")
        document.getElementsByClassName("curse_btn")[j].removeAttribute("onclick")
        document.getElementsByClassName("dodge_btn")[j].removeAttribute("onclick")
        document.getElementsByClassName("special_btn")[j].removeAttribute("onclick")
        document.getElementsByClassName("attack_btn")[i].removeAttribute("onclick")
        document.getElementsByClassName("curse_btn")[i].removeAttribute("onclick")
        document.getElementsByClassName("dodge_btn")[i].removeAttribute("onclick")
        document.getElementsByClassName("special_btn")[i].removeAttribute("onclick")
      
      //var backgroundColor = ["linear-gradient(120deg, rgb(0,0,102), 20%, rgb(153, 102, 255), 40%, rgb(0,0,102));","linear-gradient(240deg, rgb(187,24,27), 20%, rgb(25,3,5), 50%, rgb(178,20,22))"]
      var backgroundColor = ["linear-gradient(120deg, rgb(0,0,102), 20%, rgb(153, 102, 255), 40%, rgb(0,0,102));","linear-gradient(240deg, rgb(187,24,27), 20%, rgb(25,3,5), 50%, rgb(178,20,22))","linear-gradient(240deg, rgb(0, 0, 0), 60%, rgb(27, 27, 27), 90%, rgb(27, 27, 27))"]
      //var idBackground = 0
       var idBackground2 = 0
      if(characters[id_selected[curIndex[i]]]["estilo"] == "n_humano"){
        idBackground2=1
      }

      var namePlayerCard = "name_player1"
      if(player_id ==2 ){
        namePlayerCard =  "name_player2"
      }

      if(document.getElementById(namePlayerCard).innerHTML.includes("Mahoraga")  || document.getElementById(namePlayerCard).innerHTML.includes("Higuruma")){
        idBackground=2;
      }

        document.getElementsByClassName("player_card_on")[j].style.cssText = "border-color:red;opacity:1;background-image:"+backgroundColor[idBackground2];
         

          //if(countLoss[i] == 7){
          //  end_game(2)
          //}  
    }
    updateAttribute(player_id)
   
  
}

function damage_animation(value_damage, player_id){
  document.getElementById("damageOutput").innerHTML = "-"+value_damage
  var typeDamageAnim = ""
  if(mode == 1 && (window.innerWidth <= 400 || window.innerHeight >= 800)  ){
    if(player_id ==2){
      typeDamageAnim = "2"
    }

  }

  document.getElementById("damageOutput").style.animation = "damageAnimation"+typeDamageAnim+" 0.5s"
   setTimeout(() => {
     document.getElementById("damageOutput").style.animation= "none";
}, 500);  
}

var selectedBotCard = 0
function bot(){
  if(mode==2){
    
  
  //de zero a dez
  var action_bot = Math.floor(Math.random() * 11)  
  var tool_bot = Math.floor(Math.random() * 3 + 1) 
  setTimeout(() => {
    switch_tool(tool_bot,2)
    }, 1000);  
  
  setTimeout(() => {
        dano = parseInt(document.getElementsByClassName("ataque")[0].innerHTML)
        vida_oponente = parseInt(document.getElementsByClassName("life")[1].innerHTML)
        defesa = parseInt(document.getElementsByClassName("defesa")[1].innerHTML)
        energiaAmal = parseInt(document.getElementsByClassName("energiaA")[0].innerHTML)
        vidaPlayer = parseInt(document.getElementsByClassName("life")[0].innerHTML)
        
    if(selectedBotCard <=7){
      if(vidaPlayer>0){
        
        if(vida_oponente > 0){
          console.log(vidaRound[1]/2)
          console.log(vidaPlayer)
           if(vidaRound[1]/2 > vidaPlayer && (energiaAmal < 0 || parseInt(current_tool2["energiaA"]) < 0)){
            if(dificulty != 2 ){

              if( action_bot>2 && action_bot <=7){
                spec(2)              
              }else if(action_bot <=2){
                attack(2)
              }else if(action_bot > 7 && action_bot <= 9){
                curse(2)
              }else{
                dodge(2)
              }
            }else if(dificulty == 2 ){
              console.log("testeENEARM")
              spec(2)
            }
          }else if(energiaAmal < 0 || parseInt(current_tool2["energiaA"]) < 0){
            if( action_bot>2 && action_bot <=9){
              curse(2)              
            }else if(action_bot <=2){
              attack(2)
            }else if(action_bot > 9){
              dodge(2)
            }

          }else{
            if(action_bot <=4){
              dodge(2)              
            }else if(action_bot > 4){
              attack(2)
            }
          }
          
        }        
      }else{
        selectedBotCard += 1     
        select_card(selectedBotCard,2)
      }
  }else{
    if(vidaPlayer=0){
      end_game(1)
    }
  }
    
}, 1200);  
    }
}

function reset(){
  window.location.href = "../index.html"
}



var id_song = Math.floor(Math.random() * 7) + 1  
document.getElementById("soundtrack").src="Audio/song"+id_song+".mp3"
document.getElementById("soundtrack").preload = "auto";
function play_soundtrack( volum = 0.35){
  document.getElementById("soundtrack").play()
  document.getElementById("soundtrack").volume = volum
  //document.getElementById("soundtrack").muted = false;

}

var sndtrack = 0
function toggle_soundtrack(){
  play_soundtrack()
 
  var sign = ""
  if(sndtrack == 1){
    for(var v=0; v< document.getElementsByClassName("sounds").length; v++){
      document.getElementsByClassName("sounds")[v].muted = true
    }
    document.getElementById("soundtrack").muted = true;
    sign = "◼"
    sndtrack = 0
  }else{
    for(var v=0; v< document.getElementsByClassName("sounds").length; v++){
      document.getElementsByClassName("sounds")[v].muted = false
    }
    document.getElementById("soundtrack").muted = false;
    sign = "▶"
    sndtrack = 1
  }
  document.getElementById("volume_btn").innerHTML = sign

}

